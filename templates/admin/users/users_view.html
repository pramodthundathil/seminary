{% extends 'admin/index.html' %}
{% block content %}

<style>
.user-card {
    max-width: 900px;
    margin: 0 auto;
}
.info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
}
.info-box dt {
    color: #6b7280;
    margin-bottom: 4px;
    font-size: 13px;
}
.info-box dd {
    font-size: 15px;
    margin: 0;
    font-weight: 600;
    color: var(--text-dark);
}
@media(max-width:700px){
    .info-grid { grid-template-columns: 1fr; }
}
</style>

<div class="gallery-container user-card">
    <div class="page-header" style="margin-bottom:12px;">
        <h1>User Details</h1>
        <a href="{% url 'users_list' %}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> Back
        </a>
        <a href="{% url 'users_delete' user.id %}" class="btn btn-danger"
           onclick="return confirm('Are you sure you want to delete this user?')">
            <i class="fas fa-trash"></i> Delete
        </a>
    </div>

    <div class="card" style="padding:22px; border-radius:12px;">
        
        <div style="display:flex; justify-content:space-between; flex-wrap:wrap; gap:20px;">
            <div>
                <h3 style="margin:0;">{{ user.name }}</h3>
                <div style="color:#6b7280; font-size:14px;">{{ user.email }}</div>
                <div style="color:#6b7280; font-size:14px;">Username: {{ user.username }}</div>

                {% if user.is_active %}
                    <span class="status-badge status-active" style="margin-top:8px;">Active</span>
                {% else %}
                    <span class="status-badge status-inactive" style="margin-top:8px;">Inactive</span>
                {% endif %}
            </div>

            <div style="text-align:right;">
                <div style="font-size:13px; color:#6b7280;">User ID</div>
                <div style="font-weight:700;">#{{ user.id }}</div>
                <div style="font-size:13px; margin-top:6px; color:#6b7280;">
                    Last Login:
                </div>
                <div>
                    {% if user.last_login %}
                        {{ user.last_login|date:"M d, Y H:i" }}
                    {% else %}
                        Never
                    {% endif %}
                </div>
            </div>
        </div>

        <hr style="margin:20px 0; border-color:#eef2f7;">

        <div class="info-grid">

            <div class="info-box">
                <dt>Course Completed Email</dt>
                <dd>{{ user.course_completed_email|default:"-" }}</dd>

                <dt style="margin-top:10px;">Email Verified At</dt>
                <dd>
                    {% if user.email_verified_at %}
                        {{ user.email_verified_at|date:"M d, Y H:i" }}
                    {% else %}
                        Not verified
                    {% endif %}
                </dd>

                <dt style="margin-top:10px;">Locked Exam</dt>
                <dd>{{ user.locked_exam|default:"0" }}</dd>

                <dt style="margin-top:10px;">Banned At</dt>
                <dd>
                    {% if user.banned_at %}
                        {{ user.banned_at|date:"M d, Y H:i" }}
                    {% else %}
                        Not banned
                    {% endif %}
                </dd>
            </div>

            <div class="info-box">
                <dt>Church Admin</dt>
                <dd>{{ user.church_admin|default:"-" }}</dd>

                <dt style="margin-top:10px;">Account Created</dt>
                <dd>{{ user.created_at|date:"M d, Y H:i" }}</dd>

                <dt style="margin-top:10px;">Updated At</dt>
                <dd>{{ user.updated_at|date:"M d, Y H:i" }}</dd>

                <dt style="margin-top:10px;">Expires On</dt>
                <dd>{{ user.expired_at|default:"-" }}</dd>
            </div>

        </div>

    </div>
</div>

{% endblock %}
